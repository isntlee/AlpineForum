<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" href="main.css" type="text/css" />
    <title>Alpine.js - testing</title>
</head>

<body>



    <div class="all-pets" x-data="{pets: [], loadedYet: false}" x-init="{pets} = await (await fetch('https://learnwebcode.github.io/json-example/pets-data.json')).json(); loadedYet = true">
        <template x-if="!pets.length && loadedYet">
            <p>Whoops, you have no pets.</p>
        </template>
        <template x-for="(pet, index) in pets">
            <div class="pet-card">
                <div class="pet-image">
                    <img :src="pet.photo" />
                </div>
                <div x-data="{showAge: false}" class="pet-text">
                    <h2 x-text="pet.name"></h2>
                    <p>Species: <span x-text="pet.species"></span></p>
                    <template x-if="pet.favFoods">
                    <p>Favorite foods: <span x-html="pet.favFoods"></span></p>
                    </template>
                    <button class="cool-button" x-on:click="showAge = ! showAge">Toggle Age</button>
                    <span x-show="showAge" x-transition x-text="pet.birthYear"></span>
                    <p>
                    <button class="delete-pet" x-on:click="pets = pets.filter((pet, loopedIndex) => {
                        return index != loopedIndex
                        })
                        console.log(`Imagine we also send an API request to a url to delete ${pet.name}`)
                        ">
                        Delete Pet
                    </button>
                    </p>
                </div>
            </div>
        </template>
    </div>

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js"></script>
<script src="/alpine.js"></script>

</body>
</html>  